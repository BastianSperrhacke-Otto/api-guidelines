# Config ID: pulls.assigned
# 
# This configuration file is auto-generated
# by https://github.com/otto-ec/assets_protecty.
# 
# Do not modify this file unless you know what you do.
# All changes will be overwritten during next update run.
# 
# If you need to modify this file permanently then place your configuration overrides in
# - .github/gitty.yml#/configs/pulls/assigned,
# 
# and use the schema appropriate to this file.
# See https://github.com/otto-ec/assets_protecty#readme for more details and documentation.
# 
# This config can be affected by these presets: base, default, terraform, non-assets
# 
name: PR Assigned to Assets
"on":
  pull_request_target:
    types:
      - assigned
jobs:
  process:
    runs-on: ubuntu-latest
    if: >-
      !startsWith(github.event.repository.name, 'assets_') &&
      !startsWith(github.event.pull_request.user.login, 'dependabot')
    steps:
      - uses: jurijzahn8019/action-is-user-member-of-teams@v0.0.58
        id: checker
        with:
          token: ${{ secrets.TOKEN_GITHUB }}
          username: ${{ github.event.assignee.login }}
          teams: otto-ec/assets
      - name: Echo true
        if: ${{ steps.checker.outputs.ismember == 'true' }}
        run: |
          echo "User is team Member"
          echo ${{ env.USER_IS_MEMBER }}
      - name: Echo false
        if: ${{ steps.checker.outputs.ismember == 'false' }}
        run: |
          echo "User is team Member"
          echo ${{ env.USER_IS_MEMBER }}
      - name: Move new Draft Pull Request in 'To do'
        uses: alex-page/github-project-automation-plus@v0.8.1
        if: >-
          steps.checker.outputs.ismember == 'true' &&
          github.event.pull_request.draft == true
        with:
          project: Team Assets
          column: To do
          repo-token: ${{ secrets.TOKEN_GITHUB }}
      - name: Move new Pull Request in Progress
        uses: alex-page/github-project-automation-plus@v0.8.1
        if: >-
          steps.checker.outputs.ismember == 'false' &&
          github.event.pull_request.draft == false
        with:
          project: Team Assets
          column: In Progress
          repo-token: ${{ secrets.TOKEN_GITHUB }}
